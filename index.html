<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="./assets/hundred-points.png">
    <title>Not a Scam 100%</title>
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;600&family=Material+Icons&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="valentine-loader">
        <div class="dots">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <div class="heart-container" id="heart-container"></div>
    <div class="container scalloped">
        <h1 class="title text-display gold-text">Christeel Happy Valentine's Day!</h1>
        <h2 class="header text-subheading">Wanna go out sometime this week? Preferably Sat üòÖ</h2>

        <div class="button-choices">

            <div id="yes-button" class="btn-container">
                <div class="btn-drawer transition-top">Really?</div>
                <div class="btn-drawer transition-bottom">Lesgooo!!</div>

                <button class="btn" onclick="handleResponse('yes')">
                    <span class="btn-text">Sure!</span>
                </button>
            </div>

            <div id="no-button" class="btn-container">
                <div class="btn-drawer no transition-top">Awww...</div>
                <div class="btn-drawer no transition-bottom">Booo!!</div>

                <button class="btn">
                    <span class="btn-text">No Thanks..</span>
                </button>
                <button id="extra-button" class="button type1 hidden">
                    <span class="btn-txt">No +1</span>
                </button>
            </div>
        </div>

    </div>
    <!-- Modal -->
    <div class="modal" id="success-modal">
        <div class="modal-card">
            <div class="tenor-gif-embed" data-postid="17498744034444290732" data-share-method="host"
                data-aspect-ratio="1" data-width="100%"><a
                    href="https://tenor.com/view/happy-happy-happy-happy-happy-happy-cat-jumping-happy-cat-gif-17498744034444290732">Happy
                    Happy Happy Happy Sticker</a>from <a href="https://tenor.com/search/happy-stickers">Happy
                    Stickers</a></div>
            <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            <div class="modal-header">
                <span class="material-icons" style="font-size:4rem;color:#dc2626;">celebration</span>
                <h2>Aight issa Date!</h2>
            </div>

            <p>See you next Saturday! ‚ù§Ô∏è (or any other day you prefer)</p>
            <p class="ps-section">P.S. - Pa inform nalang din ulit ako sa answer mo hahaha üòÜ</p>
            <button class="btn-secondary" onclick="createFireEmoticon()">Lesgoo!</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script>
        window.addEventListener("load", () => {
            setTimeout(() => {
                document
                    .getElementById("valentine-loader")
                    .classList.add("hidden");
            }, 3000);
        });
        document.getElementById("extra-button").addEventListener("click", () => {
            window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
        });
        const noButton = document.getElementById("no-button");
        let escapeAttempts = 0;
        const maxAttempts = 4;

        const animateMove = (element, prop, pixels) =>
            anime({
                targets: element,
                [prop]: `${pixels}px`,
                easing: "easeOutCirc"
            });

        const MIN_DISTANCE = 100; // pixels ‚Äì tweak this
        const EDGE_PADDING_REM = 8;
        const REM_IN_PX = parseFloat(getComputedStyle(document.documentElement).fontSize);
        const EDGE_PADDING = EDGE_PADDING_REM * REM_IN_PX;

        ["click"].forEach(function (el) {
            noButton.addEventListener(el, function (event) {
                if (escapeAttempts >= maxAttempts) {
                    noButton.classList.add('disabled');
                    const extraButton = document.getElementById("extra-button");
                    const rightDrawerTop = document.querySelector(".transition-top.no");
                    const rightDrawerBottom = document.querySelector(".transition-bottom.no");
                    rightDrawerBottom.style.margin = "0 85px 0 0 ";
                    rightDrawerTop.innerHTML = "Aiight"
                    rightDrawerBottom.innerHTML = "Understandable"
                    extraButton.classList.remove('hidden');
                    noButton.style.width = "250px"
                    return;
                }

                escapeAttempts++;

                const container = document.querySelector('.container');
                const containerRect = container.getBoundingClientRect();
                const buttonRect = this.getBoundingClientRect();

                const minTop =
                    containerRect.top + EDGE_PADDING;

                const minLeft =
                    containerRect.left + EDGE_PADDING;

                const maxTop =
                    containerRect.bottom - buttonRect.height - EDGE_PADDING;

                const maxLeft =
                    containerRect.right - buttonRect.width - EDGE_PADDING;

                const currentX = buttonRect.left;
                const currentY = buttonRect.top;

                let left, top, distance;

                do {
                    top = getRandomNumber(maxTop - minTop) + minTop;
                    left = getRandomNumber(maxLeft - minLeft) + minLeft;

                    distance = Math.hypot(left - currentX, top - currentY);
                } while (distance < MIN_DISTANCE);

                animateMove(this, "left", left).play();
                animateMove(this, "top", top).play();
            });
        });

        const getRandomNumber = (num) => {
            return Math.floor(Math.random() * (num + 1));
        };

        // Floating hearts
        const container = document.getElementById('heart-container');
        const hearts = ['favorite', 'favorite_border'];

        function createHeart() {
            const heart = document.createElement('span');
            heart.className = 'material-icons floating-heart';
            heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.fontSize = (Math.random() * 25 + 15) + 'px';
            heart.style.bottom = '-40px';
            heart.style.animationDuration = (Math.random() * 4 + 4) + 's';
            container.appendChild(heart);

            setTimeout(() => heart.remove(), 8000);
        }

        setInterval(createHeart, 300);

        function handleResponse(choice) {
            if (choice === 'yes') {
                document.getElementById('success-modal').classList.add('active');
            } else {
                alert("Aww, maybe next time! ‚ù§Ô∏è");
            }
        }

        function createFireEmoticon() {
            const fireContainer = document.getElementById('success-modal');
            const fire = document.createElement('span');
            fire.className = 'material-icons floating-fire';
            fire.textContent = 'üî•';
            fire.style.left = Math.random() * 100 + '%';
            fire.style.fontSize = (Math.random() * 30 + 20) + 'px';
            fire.style.bottom = '-40px';
            fire.style.animationDuration = (Math.random() * 3 + 2) + 's';
            fire.style.color = '#ff6b6b';
            fireContainer.appendChild(fire);

            // setTimeout(() => fire.remove(), 8000);
        }
    </script>
</body>

</html>